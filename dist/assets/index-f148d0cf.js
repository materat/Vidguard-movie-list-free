(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const E="https://listeamed.net/v1/video/list?key=m0K9VXgwv1pb4ZJx21nz52P3R8zaolB6WnA&folder=0&offset=0&limit=1000000",I=document.getElementById("searchForm"),L=document.getElementById("searchInput"),m=document.getElementById("results"),C=document.getElementById("playerContainer"),w=document.getElementById("player"),f=document.getElementById("status"),h=document.getElementById("movie-suggestions"),i=document.getElementById("carousel"),y=document.getElementById("carouselContainer");let l=[],a=0,p;function c(e,t=!1){f.textContent=e,f.style.display="block",f.style.backgroundColor=t?"#ffdddd":"#ddffdd"}async function S(){try{c("Cargando películas y series...");const e=await fetch(E);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(t.result&&Array.isArray(t.result))l=t.result,c(`${l.length} Total de películas y series.`),M(l),b();else throw new Error("Formato de datos inesperado")}catch(e){console.error("Error al cargar películas y series:",e),c("Error al cargar las películas y series. Por favor, intente más tarde. Soporte: https://t.me/ssomoscomunidad",!0)}}function M(e){h.innerHTML="",e.forEach(t=>{const o=document.createElement("option");o.value=d(t),h.appendChild(o)})}function N(e){return l.filter(t=>d(t).toLowerCase().includes(e.toLowerCase()))}function d(e){return e.Name||"Películas y series sin título"}function b(){const e=l.slice(0,10);i.innerHTML="",e.forEach((t,o)=>{const r=document.createElement("div");r.classList.add("carousel-item"),o===0&&r.classList.add("active"),r.textContent=d(t),r.addEventListener("click",()=>g(t)),i.appendChild(r)}),e.length>0?(y.style.display="block",P()):y.style.display="none"}function P(){const e=document.querySelectorAll(".carousel-item"),t=e.length;t>0&&(p&&clearInterval(p),p=setInterval(()=>{e[a].classList.remove("active"),a=(a+1)%t,e[a].classList.add("active")},5e3))}window.navigateCarousel=function(e){const t=document.querySelectorAll(".carousel-item"),o=t.length;o>0&&(t[a].classList.remove("active"),a=(a+e+o)%o,t[a].classList.add("active"),B())};function B(){if(i.children.length===0)return;const e=i.children[0].offsetWidth,t=parseInt(window.getComputedStyle(i.children[0]).marginRight),o=a*(e+t);i.style.transition="transform 0.5s ease",i.style.transform=`translateX(-${o}px)`}function g(e){const t=e.HashID;if(t){const o=`https://listeamed.net/e/${t}`;w.src=o,C.style.display="block",c(`Estás viendo: ${d(e)}`),O(e)}else c("Error: No se pudo encontrar el enlace de la película o serie. Soporte: https://t.me/ssomoscomunidad",!0)}function O(e){let t=JSON.parse(localStorage.getItem("watchedMovies"))||[];t.includes(e.HashID)||(t.push(e.HashID),localStorage.setItem("watchedMovies",JSON.stringify(t))),v()}function v(){const e=JSON.parse(localStorage.getItem("watchedMovies"))||[];document.querySelectorAll(".movie").forEach(o=>{const r=o.textContent,s=l.find(n=>d(n)===r);s&&e.includes(s.HashID)&&(o.style.backgroundColor="#d0e7ff")})}function A(e){if(m.innerHTML="",e.length===0){m.innerHTML="<p>No se encontraron resultados. Soporte: https://t.me/ssomoscomunidad</p>";return}e.forEach(t=>{const o=document.createElement("div");o.classList.add("movie"),o.textContent=d(t),o.addEventListener("click",()=>g(t)),m.appendChild(o)})}I.addEventListener("submit",e=>{e.preventDefault();const t=L.value.trim();if(t){const o=N(t);A(o)}else c("Por favor, ingrese un término de búsqueda.",!0)});document.addEventListener("DOMContentLoaded",()=>{S(),v()});
